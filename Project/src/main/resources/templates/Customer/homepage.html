<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Homepage Customer</title>
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,500,600,700,800,900&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet" href="/CustomerStyle/homepageStyle.css" />
</head>

<body>
  <div class="page-container">
    <div class="header">
      <div class="navigation">
        <img src="/static/Assets/logo.png" />

        <div class="nav-search">
          <div class="left-nav">
            <a th:href="@{/customer/homepage}">Home</a>
            <a th:href="@{/customer/movies}">Movies</a>
            <a th:href="@{/customer/cart}">My Cart</a>
            <a th:href="@{/customer/myRentals}">My Rentals</a>
            <a th:href="@{/customer/profile}">Profile</a>
            <a th:href="@{/logout}">Log Out</a>
          </div>

          <div class="right-nav">
            <img src="/static/Assets/search-icon.png" />
            <input type="text" class="search-bar" placeholder="Search movies, tv shows" />
          </div>
        </div>
      </div>

      <div class="movie-carousel">
        <div class="carousel-container">
          <div class="carousel-slide">
            <div th:each="wheelMovie : ${wheelMovies}">
              <div class="slide">
                <!-- MASIH DUMMY POSTER -->
                <img src="/static/Assets/Movies Poster/Horizontal/dummyhorizontal.jpg">
                <div class="slide-description">
                  <p th:text="${wheelMovie.release_year}">Year</p>
                  <h1 th:text="${wheelMovie.title}">Title</h1>
                  <p th:text="${wheelMovie.duration} + ' min • ' + ${wheelMovie.genres_names}"><b>duration • genre</b>
                  </p>
                  <p th:text="${wheelMovie.description}">
                    Description
                  </p>

                  <div class="button-container">
                    <button type="button" class="play-button">
                      <b>Rent Now</b>
                    </button>

                    <button type="button" class="detail-button" th:attr="data-title=${wheelMovie.title}"
                      onclick="redirectToDetails(this)">
                      <b>More Details</b>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <button class="prev">❮</button>
          <button class="next">❯</button>
        </div>
      </div>

    </div>

    <div class="latest-release">
      <h2>Latest Release</h2>
      <div class="movies-container">
        <div th:each="movie : ${latestMovies}">
          <div class="latest-movies">
            <!-- MASIH DUMMY POSTER -->
            <img th:src="${movie.portraitposter}" th:attr="data-title=${movie.title}"
              onclick="redirectToDetails(this)" />
            <p class="title" th:text="${movie.title}">Movie Title</p>
            <p class="genre" th:text="${movie.genres_names}">Genre</p>
          </div>
        </div>
      </div>
    </div>

    <div class="all-movies">
      <h2>Adventure</h2>
      <div class="movies-container">
        <div th:each="adventureMovie : ${adventureMovies}">
          <div class="movies">
            <!-- MASIH DUMMY POSTER -->
            <img th:src="${adventureMovie.landscapeposter}" th:attr="data-title=${adventureMovie.title}"
              onclick="redirectToDetails(this)" />
            <p class="title" th:text="${adventureMovie.title}">Movie Title</p>
            <p class="genre" th:text="${adventureMovie.genres_names}">Genre</p>
          </div>
        </div>
      </div>
    </div>

    <div class="tv-shows">
      <h2>Sci-Fi</h2>
      <div class="movies-container">
        <div th:each="scifiMovie : ${scifiMovies}">
          <div class="movies">
            <img th:src="${scifiMovie.landscapeposter}" th:attr="data-title=${scifiMovie.title}"
              onclick="redirectToDetails(this)" />
            <p class="title" th:text="${scifiMovie.title}">Movie Title</p>
            <p class="genre" th:text="${scifiMovie.genres_names}">Genre</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer>ⓒ All Rights Reserved. 2024 The Reel Deal</footer>
</body>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const navigation = document.querySelector(".navigation");

    window.addEventListener("scroll", function () {
      if (window.scrollY > 50) {
        navigation.classList.add("blurred"); // Add blur effect when scrolling
      } else {
        navigation.classList.remove("blurred"); // Remove blur effect when not scrolling
      }
    });
  });

  document.addEventListener("DOMContentLoaded", function () {
    const slides = document.querySelectorAll(".slide");
    const carouselSlide = document.querySelector(".carousel-slide");
    const prevBtn = document.querySelector(".prev");
    const nextBtn = document.querySelector(".next");

    let counter = 0;

    function updateSlide() {
      const size = slides[0].clientWidth;
      carouselSlide.style.transform = `translateX(${-size * counter}px)`;
    }

    nextBtn.addEventListener("click", () => {
      if (counter >= slides.length - 1) return;
      counter++;
      updateSlide();
    });

    prevBtn.addEventListener("click", () => {
      if (counter <= 0) return;
      counter--;
      updateSlide();
    });

    window.addEventListener("resize", updateSlide); // Adjust for responsive design
  });

  function redirectToDetails(button) {
    const title = button.getAttribute('data-title');
    const encodedTitle = encodeURIComponent(title);
    const url = `/customer/details/${encodedTitle}`;
    window.location.href = url;
  }

</script>

</html>